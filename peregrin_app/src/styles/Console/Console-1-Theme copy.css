:root {
    /* Warp Speed Palette - Deep & Dark */
    --bg-color-zerolevel: #020305;       /* Almost black */
    --bg-color-firstlevel: #080b12;      /* Very Deep Navy */
    --bg-color-secondlevel: #0f1621;     /* Deep Navy */
    --bg-color-thirdlevel: #1a2433;      /* Lighter Navy */

    /* Main Accents */
    --color-primary: #7dd1e7;            /* Sky Cyan */
    --color-tertiary: #394d9b;           /* Royal Blue */
    --color-quarterary: #a8d897;         /* Lime Green */
    --color-hover: #a8d897;              /* Lime Green Hover */

    /* Text Colors */
    --color-secondary: #e0e6ed;          /* Off-white */
    --color-zero: #546e7a;               /* Muted Blue-grey */
    --color-zerosecondary: #78909c;
    --color-name: #a8d897;

    /* Button Specifics */
    --color-action-btn-primary: #0f1621;
    --color-action-btn-primary-hover: #1a2433;
    --color-action-btn-primary-border: #394d9b; 
    
    --color-task-btn: #0a1a12;
    --color-task-btn-hover: #142b1f;
    --color-task-btn-border: #a8d897;
    
    /* Functional Glows - Enhanced for "More Neon" */
    --glow-text-primary: 0 0 15px rgba(125, 209, 231, 0.7);
    --glow-text-hover: 0 0 18px rgba(168, 216, 151, 0.6);
    --glow-focus: 0 0 18px rgba(125, 209, 231, 0.3);
    --glow-hover: 0 0 25px rgba(168, 216, 151, 0.25);
    --glow-border: 0 0 10px rgba(125, 209, 231, 0.4);
    
    /* Smooth Transition */
    --transition-smooth: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* cursor & body */
body {
    background-color: var(--bg-color-zerolevel) !important;
    /* Very subtle deep gradient, not distracting */
    background-image: radial-gradient(circle at top center, #0f1621 0%, #020305 70%) !important;
}

/* base color for all text */
* {
    color: var(--color-secondary) !important;
}

.main {
    scrollbar-color: var(--color-zero) var(--bg-color-zerolevel) !important;
}

/* Uniform Card Style */
.card {
    border: 1px solid rgba(57, 77, 155, 0.5) !important; /* Royal Blue border transparent */
    background-color: var(--bg-color-firstlevel) !important;
    border-radius: 4px !important;
    box-shadow: none !important; 
    transition: var(--transition-smooth) !important;
}
.card:hover {
    border-color: var(--color-primary) !important;
    box-shadow: var(--glow-border), 0 10px 30px rgba(0,0,0,0.5) !important;
    transform: translateY(-1px);
}
.card-header.bg-secondary-css {
    border-bottom: 1px solid #1a2433 !important;
    border-top: none !important;
    border-left: none !important;
    background-color: var(--bg-color-secondlevel) !important;
}
.card-header.bg-blue {
    /* Cyan gradient */
    border-bottom: 1px solid var(--color-primary) !important;
    background: linear-gradient(90deg, rgba(125, 209, 231, 0.15) 0%, transparent 100%) !important;
    border-top: none !important;
    border-left: none !important;
}
.card-header.bg-blue * {
    color: var(--color-primary) !important;
    text-shadow: var(--glow-text-primary) !important;
}

/* numeric inputs - Transparent blend to fix "dark blocks" */
.form-control.shiny-input-number {
    transition: var(--transition-smooth) !important;
    border: 1px solid rgba(125, 209, 231, 0.2) !important;
    border-radius: 2px !important;
    color: var(--color-primary) !important;
    background-color: rgba(0, 0, 0, 0.2) !important; /* Transparent dark overlay */
    caret-color: var(--color-hover) !important;
}
.form-control.shiny-input-number:hover {
    border-color: var(--color-hover) !important;
    box-shadow: var(--glow-hover) !important;
    background-color: rgba(0, 0, 0, 0.3) !important;
}
.form-control.shiny-input-number:focus {
    border-color: var(--color-primary) !important;
    box-shadow: var(--glow-focus) !important;
    color: #fff !important;
    text-shadow: 0 0 8px var(--color-primary);
    background-color: rgba(0, 0, 0, 0.4) !important;
}

/* accordion base - Smoother flow */
.accordion * {
    box-shadow: none !important;
}
.accordion-item {
    border: none !important;
    background-color: transparent !important;
    margin-bottom: 0 !important; /* Remove gaps */
}
.accordion-button {
    border: none !important;
    border-bottom: 1px solid rgba(57, 77, 155, 0.3) !important;
    background-color: transparent !important;
    color: var(--color-zerosecondary) !important;
    font-weight: 600 !important;
    transition: var(--transition-smooth) !important;
}
.accordion-button:not(.collapsed) {
    color: var(--color-primary) !important;
    background: linear-gradient(90deg, rgba(125, 209, 231, 0.08) 0%, transparent 100%) !important;
    text-shadow: var(--glow-text-primary);
    border-bottom-color: var(--color-primary) !important;
}
.accordion-button:hover {
    color: var(--color-hover) !important;
    text-shadow: var(--glow-text-hover);
    background-color: rgba(255, 255, 255, 0.02) !important;
}

/* Arrow style */
.accordion-button::after {
    filter: grayscale(100%) brightness(1.5);
    transition: 0.2s ease;
}
.accordion-button:not(.collapsed)::after {
    filter: none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%237dd1e7'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e") !important;
}

/* elevated panel - subtle distinction */
.elevated-panel .card-body.bslib-gap-spacing.html-fill-item.html-fill-container {
    padding: 1rem !important;
    background-color: var(--bg-color-firstlevel) !important;
}
.elevated-panel .card {
    border: 1px solid #1a2433 !important;
}
.elevated-panel .card:hover:not(:has(.accordion:hover)) {
    border-color: var(--color-zero) !important;
}

/* draggable accordion - Smoother look */
.draggable-accordion .accordion-item {
    background-color: transparent !important;
    margin-bottom: 0 !important;
    border-bottom: 1px solid rgba(57, 77, 155, 0.3) !important;
}
.draggable-accordion .accordion-button {
    background: transparent !important;
    border: none !important;
    border-left: 3px solid transparent !important; /* Thicker indicator */
    border-radius: 0 !important;
    transition: var(--transition-smooth) !important;
    padding: 0.75rem 1rem !important;
}
.draggable-accordion .accordion-button:not(.collapsed) {
    background: linear-gradient(90deg, rgba(125, 209, 231, 0.05) 0%, transparent 100%) !important;
    border-left-color: var(--color-primary) !important;
    box-shadow: inset 10px 0 20px -10px rgba(125, 209, 231, 0.1) !important;
}
.draggable-accordion .accordion-button:hover {
    background-color: rgba(255, 255, 255, 0.02) !important;
    border-left-color: var(--color-hover) !important;
}
.draggable-accordion .accordion-body {
    border: none !important;
    background-color: rgba(0, 0, 0, 0.15) !important;
    padding: 1rem !important;
}

/* action buttons & download buttons - Strict Alignment */
.action-button.btn-primary, 
.btn.btn-default.shiny-download-link {
    height: 38px !important;
    min-height: 38px !important;
    padding: 0 16px !important;
    margin: 4px !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    box-sizing: border-box !important;
    
    border: 1px solid var(--color-action-btn-primary-border) !important;
    background-color: var(--bg-color-secondlevel) !important;
    background: none !important;
    color: var(--color-secondary) !important;
    border-radius: 2px !important;
    transition: var(--transition-smooth) !important;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 0.8rem !important;
    font-weight: 600 !important;
}

.action-button.btn-primary:hover,
.btn.btn-default.shiny-download-link:hover {
    border-color: var(--color-primary) !important;
    background-color: rgba(125, 209, 231, 0.08) !important;
    box-shadow: var(--glow-focus), inset 0 0 10px rgba(125, 209, 231, 0.1) !important;
    color: #fff !important;
    text-shadow: var(--glow-text-primary);
    transform: translateY(-1px);
}

.action-button.btn-primary:active,
.btn.btn-default.shiny-download-link:active {
    transform: translateY(1px);
    box-shadow: none !important;
}
.action-button.btn-primary:disabled,
.btn.btn-default.shiny-download-link:disabled {
    border-color: #1a2433 !important;
    color: var(--color-zero) !important;
    background: none !important;
    box-shadow: none !important;
    cursor: not-allowed !important;
}

/* task button colors */
.task-btn {
    background-color: var(--color-task-btn) !important;
    border: 1px solid var(--color-task-btn-border) !important;
    color: var(--color-hover) !important;
    border-radius: 2px !important;
}
.task-btn:hover {
    background-color: var(--color-task-btn-hover) !important;
    box-shadow: var(--glow-hover) !important;
    color: #fff !important;
}

/* input groups */
.input-group .btn {
    border: 1px solid rgba(125, 209, 231, 0.2) !important;
    background-color: rgba(0, 0, 0, 0.2) !important;
    color: var(--color-zero) !important;
}
.input-group .btn:hover {
    border-color: var(--color-hover) !important;
    color: var(--color-hover) !important;
    box-shadow: var(--glow-hover) !important;
}
.form-control {
    border: 1px solid rgba(125, 209, 231, 0.2) !important;
    background-color: rgba(0, 0, 0, 0.2) !important;
    color: var(--color-secondary) !important;
    transition: var(--transition-smooth) !important;
}
.form-control:focus {
    border-color: var(--color-primary) !important;
    box-shadow: var(--glow-focus) !important;
    background-color: rgba(0, 0, 0, 0.3) !important;
}
.form-control::placeholder {
    color: var(--color-zero) !important;
    opacity: 0.5;
}

/* progress bar */
.progress-bar {
    background-color: var(--color-primary) !important;
    box-shadow: 0 0 10px var(--color-primary);
    color: #000 !important;
    font-weight: bold;
}

/* checkboxes */
.checkbox *:checked {
    background-color: transparent !important;
    border-color: var(--color-primary) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 10'%3e%3cpath d='M3 5 L5 7 L9 3' fill='none' stroke='%237dd1e7' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e") !important;
    box-shadow: 0 0 5px var(--color-primary);
}
.checkbox *:not(:checked) {
    background-color: var(--bg-color-zerolevel) !important;
    border-color: var(--color-zero) !important;
}

/* switches */
.form-check-input.shiny-bound-input {
    background-color: var(--bg-color-zerolevel) !important;
    border: 1px solid var(--color-zero) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%236b7d8f'/%3e%3c/svg%3e") !important;
}
.form-check-input.shiny-bound-input:checked {
    background-color: transparent !important;
    border-color: var(--color-primary) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%237dd1e7'/%3e%3c/svg%3e") !important;
    box-shadow: 0 0 5px var(--color-primary);
}

/* navigation bar */
nav {
    background-color: var(--bg-color-firstlevel) !important;
    border-bottom: 1px solid rgba(57, 77, 155, 0.4) !important;
    box-shadow: 0 4px 20px rgba(0,0,0,0.4) !important; /* Subtle depth */
}
nav a {
    color: var(--color-zero) !important;
    transition: var(--transition-smooth) !important;
    font-weight: 500 !important;
}
nav a.active {
    color: var(--color-primary) !important;
    border-bottom: 2px solid var(--color-primary) !important;
    background-color: transparent !important;
    text-shadow: var(--glow-text-primary); /* Neon text flow */
}
nav a.hover,
nav a.nav-link:hover {
    color: var(--color-hover) !important;
    border-bottom: 2px solid var(--color-hover) !important;
    text-shadow: var(--glow-text-hover);
}
nav span {
    color: var(--color-secondary) !important;
    font-weight: 700 !important;
    letter-spacing: 2px; /* Wider spacing for title */
    text-shadow: 0 0 10px rgba(224, 230, 237, 0.3); /* Subtle title glow */
}

/* Nav Pills (Sidebar) */
.col-sm-2:has(.nav-pills) {
    border-right: 1px solid rgba(57, 77, 155, 0.3) !important;
}
.nav-pills .nav-item * {
    color: var(--color-zero) !important;
}
.nav-pills a.active {
    color: var(--color-primary) !important;
    background: linear-gradient(90deg, rgba(125, 209, 231, 0.08) 0%, transparent 100%) !important;
    border-left: 2px solid var(--color-primary);
    text-shadow: var(--glow-text-primary);
}
.nav-pills a.nav-link:hover {
    color: var(--color-hover) !important;
    text-shadow: var(--glow-text-hover);
}

/* sliders */
.irs-bar {
    background-color: var(--color-primary) !important;
    box-shadow: 0 0 5px var(--color-primary);
}
.irs-handle {
    background-color: var(--bg-color-zerolevel) !important;
    border: 2px solid var(--color-primary) !important;
    box-shadow: 0 0 5px var(--color-primary);
}
.irs-line {
    background-color: #1a2433 !important;
}

/* sidebar layout */
#labeling_sidebar_n_data_input_layout {
    border: 1px solid rgba(57, 77, 155, 0.4) !important;
    border-left: none !important;
}
#labeling_sidebar {
    background-color: var(--bg-color-firstlevel) !important;
}

/* sidebar accordion - uniformity */
#sidebar .accordion-item {
    background-color: var(--bg-color-firstlevel) !important;
    border-bottom: 1px solid rgba(57, 77, 155, 0.3) !important;
}
#sidebar .accordion-button {
    background-color: var(--bg-color-firstlevel) !important;
    color: var(--color-secondary) !important;
}
#sidebar .accordion-button:hover {
    color: var(--color-primary) !important;
    text-shadow: var(--glow-text-primary);
}

/* links */
.plain-link {
    color: var(--color-primary) !important;
    text-decoration: none !important;
    transition: 0.2s ease;
}
.plain-link:hover {
    color: var(--color-hover) !important;
    text-decoration: none !important;
    text-shadow: var(--glow-text-hover);
}

/* order ladder */
#order li { 
    background-color: var(--bg-color-secondlevel);
    border: 1px solid #394d9b;
    color: var(--color-secondary);
    margin-bottom: 2px;
}

/* image stack controls */
#prev, #next, #play, #stop {
    color: var(--color-zero) !important;
    transition: 0.2s;
}
#prev:hover, #next:hover {
    color: var(--color-primary) !important;
    text-shadow: 0 0 8px var(--color-primary);
}
#play:hover, #stop:hover {
    color: var(--color-quarterary) !important;
    text-shadow: 0 0 8px var(--color-quarterary);
}

/* text inputs */
.shiny-input-text.form-control.shiny-bound-input {
    border: 1px solid rgba(125, 209, 231, 0.2) !important;
    background-color: rgba(0, 0, 0, 0.2) !important;
    color: var(--color-secondary) !important;
    transition: var(--transition-smooth) !important;
}
.shiny-input-text.form-control.shiny-bound-input:focus {
    border-color: var(--color-primary) !important;
    box-shadow: var(--glow-focus) !important;
    text-shadow: 0 0 5px rgba(255,255,255,0.5);
    background-color: rgba(0, 0, 0, 0.3) !important;
}

/* data grid */
.shiny-data-grid {
    border: 1px solid rgba(57, 77, 155, 0.4) !important;
}
* table tbody * {
    background-color: var(--bg-color-zerolevel) !important;
    color: var(--color-secondary) !important;
}
* th {
    background-color: var(--bg-color-secondlevel) !important;
    color: var(--color-primary) !important;
    border-bottom: 1px solid var(--color-primary) !important;
    text-shadow: 0 0 5px rgba(125, 209, 231, 0.3);
}
* tbody tr td {
    border-bottom: 1px solid rgba(57, 77, 155, 0.2) !important;
}

/* selectize - uniform dark theme */
.selectize-input {
    border: 1px solid rgba(125, 209, 231, 0.2) !important;
    background-color: rgba(0, 0, 0, 0.2) !important;
    border-radius: 2px !important;
    transition: var(--transition-smooth) !important;
}
.selectize-input.full {
    background-color: rgba(0, 0, 0, 0.2) !important;
}
.selectize-dropdown {
    background-color: var(--bg-color-firstlevel) !important;
    border: 1px solid var(--color-primary) !important;
    box-shadow: var(--glow-border) !important;
}
.selectize-dropdown-content .option {
    color: var(--color-secondary) !important;
}
.selectize-dropdown-content .option.active {
    background-color: var(--bg-color-thirdlevel) !important;
    color: var(--color-primary) !important;
}
.selectize-input.focus {
    border-color: var(--color-primary) !important;
    box-shadow: var(--glow-focus) !important;
}

/* Modal Formatting - Neon Box */
.modal-content {
    background-color: var(--bg-color-firstlevel) !important;
    border: 1px solid var(--color-primary) !important;
    box-shadow: 0 0 30px rgba(125, 209, 231, 0.15), inset 0 0 20px rgba(0,0,0,0.8) !important;
    color: var(--color-secondary) !important;
    border-radius: 4px !important;
}
.modal-header {
    border-bottom: 1px solid rgba(125, 209, 231, 0.3) !important;
    background: linear-gradient(90deg, rgba(125, 209, 231, 0.1) 0%, transparent 100%) !important;
}
.modal-title {
    color: var(--color-primary) !important;
    text-shadow: var(--glow-text-primary) !important;
    font-weight: 600 !important;
    letter-spacing: 1px;
}
.modal-body {
    background-color: transparent !important;
    color: var(--color-secondary) !important;
}
.modal-footer {
    border-top: 1px solid rgba(125, 209, 231, 0.3) !important;
    background-color: transparent !important;
}
.modal-backdrop {
    background-color: #020305 !important;
    opacity: 0.85 !important;
    backdrop-filter: blur(2px);
}