:root {
    /* Cohesive Midnight & Neon Palette */
    --bg-color-zerolevel: #080a0f;       /* Deepest background */
    --bg-color-firstlevel: #0f131a;      /* Panel background */
    --bg-color-secondlevel: #161b25;     /* Input/Item background */
    --bg-color-thirdlevel: #1e2430;      /* Hover/Highlight background */

    /* Main Accents - "Cyber Cyan" & "Electric Purple" */
    --color-primary: #00e5ff;            /* Main active color */
    --color-tertiary: #00b8d4;           /* Secondary accent (Darker Cyan instead of Pink for consistency) */
    --color-quarterary: #ffea00;         /* Warning/Attention */
    --color-hover: #00ff9d;              /* Hover state (Mint) */

    /* Text Colors */
    --color-secondary: #e0e6ed;          /* Main text (Off-white) */
    --color-zero: #546e7a;               /* Muted text (Blue-grey) */
    --color-zerosecondary: #78909c;
    --color-name: #ffea00;

    /* Button Specifics */
    --color-action-btn-primary: #161b25;
    --color-action-btn-primary-hover: #1e2430;
    --color-action-btn-primary-border: #263238; /* Darker default border */
    
    --color-task-btn: #0f291e;
    --color-task-btn-hover: #143829;
    --color-task-btn-border: #00ff9d;
    
    /* Functional Glows (Only for active states) */
    --glow-text-primary: 0 0 8px rgba(0, 229, 255, 0.6);
    --glow-text-hover: 0 0 10px rgba(0, 255, 157, 0.5);
    --glow-focus: 0 0 10px rgba(0, 229, 255, 0.25);
    --glow-hover: 0 0 15px rgba(0, 255, 157, 0.2);
}

/* cursor & body */
body {
    background-color: var(--bg-color-zerolevel) !important;
    /* Subtle vignette instead of scanlines for cleaner look */
    background-image: radial-gradient(circle at center, #12161f 0%, #080a0f 100%) !important;
}

/* base color for all text */
* {
    color: var(--color-secondary) !important;
}

.main {
    scrollbar-color: var(--color-zero) var(--bg-color-zerolevel) !important;
}

/* Uniform Card Style - Clean, no outer glow */
.card {
    border: 1px solid #2a3240 !important;
    background-color: var(--bg-color-firstlevel) !important;
    border-radius: 4px !important;
    box-shadow: none !important; /* Removed distracting glow */
}
.card:hover {
    border-color: rgba(50, 229, 255, 0.55) !important;
    box-shadow:
        0 0 0 1px rgba(50, 229, 255, 0.25),
        0 14px 40px rgba(0, 0, 0, 0.9) !important;
    transform: translateY(-1px);
}
.card-header.bg-secondary-css {
    border-bottom: 1px solid #2a3240 !important;
    border-top: none !important;
    border-left: none !important;
    background-color: var(--bg-color-secondlevel) !important;
}
.card-header.bg-blue {
    /* Replaced pink with a deep cyan gradient for consistency */
    border-bottom: 1px solid var(--color-primary) !important;
    background: linear-gradient(90deg, rgba(0, 229, 255, 0.15) 0%, transparent 100%) !important;
    border-top: none !important;
    border-left: none !important;
}
.card-header.bg-blue * {
    color: var(--color-primary) !important;
    text-shadow: var(--glow-text-primary) !important;
}

/* numeric inputs - Uniform "Terminal" look */
.form-control.shiny-input-number {
    transition: all 0.2s ease !important;
    border: 1px solid #2a3240 !important;
    border-radius: 2px !important;
    color: var(--color-primary) !important;
    background-color: var(--bg-color-zerolevel) !important;
    caret-color: var(--color-hover) !important;
}
.form-control.shiny-input-number:hover {
    border-color: var(--color-hover) !important;
    box-shadow: var(--glow-hover) !important; /* Glow only on interaction */
}
.form-control.shiny-input-number:focus {
    border-color: var(--color-primary) !important;
    box-shadow: var(--glow-focus) !important;
    color: #fff !important;
    text-shadow: 0 0 5px var(--color-primary);
}

/* accordion base */
.accordion * {
    box-shadow: none !important;
}
.accordion-item, .accordion-button {
    border: none !important;
    background-color: transparent !important;
}
.accordion-button {
    border-bottom: 1px solid #2a3240 !important;
    color: var(--color-zerosecondary) !important;
    font-weight: 600 !important;
}
.accordion-button:not(.collapsed) {
    color: var(--color-primary) !important;
    background-color: rgba(0, 229, 255, 0.03) !important;
    text-shadow: var(--glow-text-primary); /* Text shine */
}
.accordion-button:hover {
    color: var(--color-hover) !important;
    text-shadow: var(--glow-text-hover);
}

/* Arrow style */
.accordion-button::after {
    filter: grayscale(100%) brightness(1.5);
    transition: 0.2s ease;
}
.accordion-button:not(.collapsed)::after {
    filter: none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%2300e5ff'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e") !important;
}

/* elevated panel - subtle distinction */
.elevated-panel .card-body.bslib-gap-spacing.html-fill-item.html-fill-container {
    padding: 1rem !important;
    background-color: var(--bg-color-firstlevel) !important;
}
.elevated-panel .card {
    border: 1px solid #2a3240 !important;
}
.elevated-panel .card:hover:not(:has(.accordion:hover)) {
    border-color: var(--color-zero) !important;
}

/* draggable accordion - Enhanced to be less dull */
.draggable-accordion .accordion-item {
    background-color: transparent !important;
    margin-bottom: 6px !important;
}
.draggable-accordion .accordion-button {
    background: linear-gradient(90deg, var(--bg-color-firstlevel) 0%, var(--bg-color-secondlevel) 100%) !important;
    border: 1px solid #2a3240 !important;
    border-left: 2px solid var(--color-zero) !important; /* Default state indicator */
    border-radius: 2px !important;
    transition: all 0.3s ease !important;
}
.draggable-accordion .accordion-button:not(.collapsed) {
    border-left-color: var(--color-primary) !important;
    box-shadow: -2px 0 8px rgba(0, 229, 255, 0.2) !important; /* Side glow */
}
.draggable-accordion .accordion-button:hover {
    border-color: var(--color-hover) !important;
    border-left-color: var(--color-hover) !important;
}
.draggable-accordion .accordion-body {
    border: 1px solid #2a3240 !important;
    border-top: none !important;
    background-color: rgba(8, 10, 15, 0.5) !important; /* Slightly transparent */
}

/* action buttons - Toned down default state */
.action-button.btn-primary {
    border: 1px solid var(--color-action-btn-primary-border) !important;
    background-color: var(--bg-color-secondlevel) !important;
    background: none !important; /* Remove gradient in default state */
    color: var(--color-zerosecondary) !important; /* Dimmer text initially */
    border-radius: 2px !important;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important; /* Smoother transition */
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 0.85rem;
}
.action-button.btn-primary:hover {
    border-color: var(--color-primary) !important;
    background: linear-gradient(180deg, rgba(0,229,255,0.15) 0%, rgba(0,0,0,0) 100%) !important;
    box-shadow: var(--glow-focus) !important;
    color: #fff !important;
    text-shadow: var(--glow-text-primary);
    transform: translateY(-1px);
}
.action-button.btn-primary:active {
    transform: translateY(1px);
    box-shadow: none !important;
}
.action-button.btn-primary:disabled {
    border-color: #2a3240 !important;
    color: var(--color-zero) !important;
    background: none !important;
    box-shadow: none !important;
    cursor: not-allowed !important;
}

/* task button colors */
.task-btn {
    background-color: var(--color-task-btn) !important;
    border: 1px solid var(--color-task-btn-border) !important;
    color: var(--color-hover) !important;
    border-radius: 2px !important;
}
.task-btn:hover {
    background-color: var(--color-task-btn-hover) !important;
    box-shadow: var(--glow-hover) !important;
    color: #fff !important;
}

/* input groups */
.input-group .btn {
    border: 1px solid #2a3240 !important;
    background-color: var(--bg-color-secondlevel) !important;
    color: var(--color-zero) !important;
}
.input-group .btn:hover {
    border-color: var(--color-hover) !important;
    color: var(--color-hover) !important;
}
.form-control {
    border: 1px solid #2a3240 !important;
    background-color: var(--bg-color-zerolevel) !important;
    color: var(--color-secondary) !important;
}
.form-control:focus {
    border-color: var(--color-primary) !important;
    box-shadow: none !important; /* Keep text inputs clean */
}
.form-control::placeholder {
    color: var(--color-zero) !important;
    opacity: 0.5;
}

/* progress bar */
.progress-bar {
    background-color: var(--color-primary) !important;
    box-shadow: 0 0 10px var(--color-primary);
    color: #000 !important;
    font-weight: bold;
}

/* checkboxes */
.checkbox *:checked {
    background-color: transparent !important;
    border-color: var(--color-primary) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 10'%3e%3cpath d='M3 5 L5 7 L9 3' fill='none' stroke='%2300e5ff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e") !important;
    box-shadow: 0 0 5px var(--color-primary);
}
.checkbox *:not(:checked) {
    background-color: var(--bg-color-zerolevel) !important;
    border-color: var(--color-zero) !important;
}

/* switches */
.form-check-input.shiny-bound-input {
    background-color: var(--bg-color-zerolevel) !important;
    border: 1px solid var(--color-zero) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%236b7d8f'/%3e%3c/svg%3e") !important;
}
.form-check-input.shiny-bound-input:checked {
    background-color: transparent !important;
    border-color: var(--color-primary) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%2300e5ff'/%3e%3c/svg%3e") !important;
    box-shadow: 0 0 5px var(--color-primary);
}

/* navigation bar */
nav {
    background-color: var(--bg-color-firstlevel) !important;
    border-bottom: 1px solid #2a3240 !important;
    box-shadow: none !important;
}
nav a {
    color: var(--color-zero) !important;
    transition: all 0.3s ease !important;
    font-weight: 500 !important;
}
nav a.active {
    color: var(--color-primary) !important;
    border-bottom: 2px solid var(--color-primary) !important;
    background-color: transparent !important;
    text-shadow: var(--glow-text-primary); /* Neon text flow */
}
nav a.hover,
nav a.nav-link:hover {
    color: var(--color-hover) !important;
    border-bottom: 2px solid var(--color-hover) !important;
    text-shadow: var(--glow-text-hover);
}
nav span {
    color: var(--color-secondary) !important;
    font-weight: 700 !important;
    letter-spacing: 2px; /* Wider spacing for title */
    text-shadow: 0 0 10px rgba(224, 230, 237, 0.3); /* Subtle title glow */
}

/* Nav Pills (Sidebar) */
.col-sm-2:has(.nav-pills) {
    border-right: 1px solid #2a3240 !important;
}
.nav-pills .nav-item * {
    color: var(--color-zero) !important;
}
.nav-pills a.active {
    color: var(--color-primary) !important;
    background: linear-gradient(90deg, rgba(0,229,255,0.08) 0%, transparent 100%) !important;
    border-left: 2px solid var(--color-primary);
    text-shadow: var(--glow-text-primary);
}
.nav-pills a.nav-link:hover {
    color: var(--color-hover) !important;
    text-shadow: var(--glow-text-hover);
}

/* sliders */
.irs-bar {
    background-color: var(--color-primary) !important;
    box-shadow: 0 0 5px var(--color-primary);
}
.irs-handle {
    background-color: var(--bg-color-zerolevel) !important;
    border: 2px solid var(--color-primary) !important;
    box-shadow: 0 0 5px var(--color-primary);
}
.irs-line {
    background-color: #2a3240 !important;
}

/* sidebar layout */
#labeling_sidebar_n_data_input_layout {
    border: 1px solid #2a3240 !important;
    border-left: none !important;
}
#labeling_sidebar {
    background-color: var(--bg-color-firstlevel) !important;
}

/* sidebar accordion - uniformity */
#sidebar .accordion-item {
    background-color: var(--bg-color-firstlevel) !important;
    border-bottom: 1px solid #2a3240 !important;
}
#sidebar .accordion-button {
    background-color: var(--bg-color-firstlevel) !important;
    color: var(--color-secondary) !important;
}
#sidebar .accordion-button:hover {
    color: var(--color-primary) !important;
    text-shadow: var(--glow-text-primary);
}

/* links */
.plain-link {
    color: var(--color-primary) !important;
    text-decoration: none !important;
    transition: 0.2s ease;
}
.plain-link:hover {
    color: var(--color-hover) !important;
    text-decoration: none !important;
    text-shadow: var(--glow-text-hover);
}

/* order ladder */
#order li { 
    background-color: var(--bg-color-secondlevel);
    border: 1px solid #2a3240;
    color: var(--color-secondary);
    margin-bottom: 2px;
}

/* image stack controls */
#prev, #next, #play, #stop {
    color: var(--color-zero) !important;
    transition: 0.2s;
}
#prev:hover, #next:hover {
    color: var(--color-primary) !important;
    text-shadow: 0 0 8px var(--color-primary);
}
#play:hover, #stop:hover {
    color: var(--color-quarterary) !important;
    text-shadow: 0 0 8px var(--color-quarterary);
}

/* text inputs */
.shiny-input-text.form-control.shiny-bound-input {
    border: 1px solid #2a3240 !important;
    background-color: var(--bg-color-zerolevel) !important;
    color: var(--color-secondary) !important;
    transition: 0.3s ease;
}
.shiny-input-text.form-control.shiny-bound-input:focus {
    border-color: var(--color-primary) !important;
    box-shadow: var(--glow-focus) !important;
    text-shadow: 0 0 2px rgba(255,255,255,0.5);
}

/* data grid */
.shiny-data-grid {
    border: 1px solid #2a3240 !important;
}
* table tbody * {
    background-color: var(--bg-color-zerolevel) !important;
    color: var(--color-secondary) !important;
}
* th {
    background-color: var(--bg-color-secondlevel) !important;
    color: var(--color-primary) !important;
    border-bottom: 1px solid var(--color-primary) !important;
    text-shadow: 0 0 5px rgba(0, 229, 255, 0.3);
}
* tbody tr td {
    border-bottom: 1px solid #2a3240 !important;
}

/* selectize - uniform dark theme */
.selectize-input {
    border: 1px solid #2a3240 !important;
    background-color: var(--bg-color-zerolevel) !important;
    border-radius: 2px !important;
}
.selectize-input.full {
    background-color: var(--bg-color-zerolevel) !important;
}
.selectize-dropdown {
    background-color: var(--bg-color-firstlevel) !important;
    border: 1px solid var(--color-primary) !important;
}
.selectize-dropdown-content .option {
    color: var(--color-secondary) !important;
}
.selectize-dropdown-content .option.active {
    background-color: var(--bg-color-thirdlevel) !important;
    color: var(--color-primary) !important;
}
.selectize-input.focus {
    border-color: var(--color-primary) !important;
    box-shadow: none !important;
}

/* download button */
.btn.btn-default.shiny-download-link {
    background-color: var(--bg-color-secondlevel) !important;
    border: 1px solid #2a3240 !important;
    color: var(--color-zero) !important;
    border-radius: 2px !important;
    transition: all 0.3s ease !important;
}
.btn.btn-default.shiny-download-link:hover {
    border-color: var(--color-primary) !important;
    color: var(--color-primary) !important;
    box-shadow: var(--glow-focus) !important;
    text-shadow: var(--glow-text-primary);
}